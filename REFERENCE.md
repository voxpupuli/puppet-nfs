# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

* [`nfs`](#nfs)
* [`nfs::client`](#nfs--client): Manage the NFS client
* [`nfs::client::config`](#nfs--client--config): Configure NFS as a client.
* [`nfs::client::package`](#nfs--client--package): Install needed packages for NFS clients.
* [`nfs::client::service`](#nfs--client--service): Manage the needed services for NFS clients.
* [`nfs::params`](#nfs--params): Manages defaults values for this module.
* [`nfs::server`](#nfs--server): Manage the NFS server.
* [`nfs::server::config`](#nfs--server--config): Configure NFS as a server.
* [`nfs::server::package`](#nfs--server--package): Install needed packages for NFS server.
* [`nfs::server::service`](#nfs--server--service): Manage the needed services for NFS server.

### Defined types

* [`nfs::client::mount`](#nfs--client--mount): Manage all mounts on a NFS client.
* [`nfs::functions::bindmount`](#nfs--functions--bindmount): Manage bindmounts.
* [`nfs::functions::create_export`](#nfs--functions--create_export): Manage export creation.
* [`nfs::functions::mkdir`](#nfs--functions--mkdir): Manage directory creation.
* [`nfs::functions::nfsv4_bindmount`](#nfs--functions--nfsv4_bindmount): Manage bindmounts for NFS v4.
* [`nfs::server::export`](#nfs--server--export): Manage all exported resources on a NFS server.

## Classes

### <a name="nfs"></a>`nfs`

The nfs class.

* **See also**
  * https://github.com/voxpupuli/puppet-nfs#examples
    * Exemples

#### Parameters

The following parameters are available in the `nfs` class:

* [`ensure`](#-nfs--ensure)
* [`server_enabled`](#-nfs--server_enabled)
* [`client_enabled`](#-nfs--client_enabled)
* [`storeconfigs_enabled`](#-nfs--storeconfigs_enabled)
* [`nfs_v4`](#-nfs--nfs_v4)
* [`nfs_v4_client`](#-nfs--nfs_v4_client)
* [`exports_file`](#-nfs--exports_file)
* [`idmapd_file`](#-nfs--idmapd_file)
* [`defaults_file`](#-nfs--defaults_file)
* [`manage_packages`](#-nfs--manage_packages)
* [`server_packages`](#-nfs--server_packages)
* [`server_package_ensure`](#-nfs--server_package_ensure)
* [`client_packages`](#-nfs--client_packages)
* [`client_package_ensure`](#-nfs--client_package_ensure)
* [`manage_server_service`](#-nfs--manage_server_service)
* [`manage_server_servicehelper`](#-nfs--manage_server_servicehelper)
* [`manage_client_service`](#-nfs--manage_client_service)
* [`server_service_name`](#-nfs--server_service_name)
* [`server_service_ensure`](#-nfs--server_service_ensure)
* [`server_service_enable`](#-nfs--server_service_enable)
* [`server_service_hasrestart`](#-nfs--server_service_hasrestart)
* [`server_service_hasstatus`](#-nfs--server_service_hasstatus)
* [`server_service_restart_cmd`](#-nfs--server_service_restart_cmd)
* [`server_nfsv4_servicehelper`](#-nfs--server_nfsv4_servicehelper)
* [`client_services`](#-nfs--client_services)
* [`client_nfsv4_services`](#-nfs--client_nfsv4_services)
* [`client_services_enable`](#-nfs--client_services_enable)
* [`client_idmapd_setting`](#-nfs--client_idmapd_setting)
* [`client_nfs_fstype`](#-nfs--client_nfs_fstype)
* [`client_nfs_options`](#-nfs--client_nfs_options)
* [`client_nfsv4_fstype`](#-nfs--client_nfsv4_fstype)
* [`client_nfsv4_options`](#-nfs--client_nfsv4_options)
* [`nfs_v4_export_root`](#-nfs--nfs_v4_export_root)
* [`nfs_v4_export_root_clients`](#-nfs--nfs_v4_export_root_clients)
* [`nfs_v4_mount_root`](#-nfs--nfs_v4_mount_root)
* [`nfs_v4_idmap_domain`](#-nfs--nfs_v4_idmap_domain)
* [`nfsv4_bindmount_enable`](#-nfs--nfsv4_bindmount_enable)
* [`client_need_gssd`](#-nfs--client_need_gssd)
* [`client_gssd_service`](#-nfs--client_gssd_service)
* [`client_gssd_options`](#-nfs--client_gssd_options)
* [`client_d9_gssdopt_workaround`](#-nfs--client_d9_gssdopt_workaround)
* [`nfs_v4_idmap_localrealms`](#-nfs--nfs_v4_idmap_localrealms)
* [`nfs_v4_idmap_cache`](#-nfs--nfs_v4_idmap_cache)
* [`manage_nfs_v4_idmap_nobody_mapping`](#-nfs--manage_nfs_v4_idmap_nobody_mapping)
* [`nfs_v4_idmap_nobody_user`](#-nfs--nfs_v4_idmap_nobody_user)
* [`nfs_v4_idmap_nobody_group`](#-nfs--nfs_v4_idmap_nobody_group)
* [`client_rpcbind_config`](#-nfs--client_rpcbind_config)
* [`client_rpcbind_optname`](#-nfs--client_rpcbind_optname)
* [`client_rpcbind_opts`](#-nfs--client_rpcbind_opts)
* [`nfs_v4_root_export_ensure`](#-nfs--nfs_v4_root_export_ensure)
* [`nfs_v4_root_export_mount`](#-nfs--nfs_v4_root_export_mount)
* [`nfs_v4_root_export_remounts`](#-nfs--nfs_v4_root_export_remounts)
* [`nfs_v4_root_export_atboot`](#-nfs--nfs_v4_root_export_atboot)
* [`nfs_v4_root_export_options`](#-nfs--nfs_v4_root_export_options)
* [`nfs_v4_root_export_bindmount`](#-nfs--nfs_v4_root_export_bindmount)
* [`nfs_v4_root_export_tag`](#-nfs--nfs_v4_root_export_tag)
* [`client_gssd_service_name`](#-nfs--client_gssd_service_name)
* [`client_services_hasrestart`](#-nfs--client_services_hasrestart)
* [`client_services_hasstatus`](#-nfs--client_services_hasstatus)
* [`client_gssdopt_name`](#-nfs--client_gssdopt_name)

##### <a name="-nfs--ensure"></a>`ensure`

Data type: `Enum['present', 'absent', 'running', 'stopped', 'disabled']`

Controls if the managed resources shall be `present` or `absent`.

If set to `absent`:
* The managed software packages are being uninstalled.
* Any traces of the packages will be purged as good as possible. This may include existing configuration files.
  The exact behavior is provider dependent.
* System modifications (if any) will be reverted as good as possible (e.g. removal of created users, services,
  changed log settings, ...).
* This is thus destructive and should be used with care.

Default value: `'present'`

##### <a name="-nfs--server_enabled"></a>`server_enabled`

Data type: `Boolean`

If set to `true`, this module will configure the node to act as a NFS server.

Default value: `false`

##### <a name="-nfs--client_enabled"></a>`client_enabled`

Data type: `Boolean`

If set to `true`, this module will configure the node to act as a client server, you can use the exported mount
resources from configured servers.

Default value: `false`

##### <a name="-nfs--storeconfigs_enabled"></a>`storeconfigs_enabled`

Data type: `Boolean`

If set to `false`, this module will not export any resources as storeconfigs.

Default value: `true`

##### <a name="-nfs--nfs_v4"></a>`nfs_v4`

Data type: `Boolean`

If set to `true`, this module will use NFS version 4 for exporting and mounting NFS resources.

Default value: `false`

##### <a name="-nfs--nfs_v4_client"></a>`nfs_v4_client`

Data type: `Boolean`

If set to `true`, this module will use NFS version 4 for mounting NFS resources.
If set to `false` it will use NFS version 3 to mount NFS resources.

Default value: `false`

##### <a name="-nfs--exports_file"></a>`exports_file`

Data type: `Stdlib::Absolutepath`

It defines the location of file with the NFS export resources used by the NFS server.

Default value: `$nfs::params::exports_file`

##### <a name="-nfs--idmapd_file"></a>`idmapd_file`

Data type: `Stdlib::Absolutepath`

It defines the location of the file with the idmapd settings.

Default value: `$nfs::params::idmapd_file`

##### <a name="-nfs--defaults_file"></a>`defaults_file`

Data type: `Optional[Stdlib::Absolutepath]`

It defines the location of the file with the NFS settings.

Default value: `$nfs::params::defaults_file`

##### <a name="-nfs--manage_packages"></a>`manage_packages`

Data type: `Boolean`

It defines if the packages should be managed through this module.

Default value: `true`

##### <a name="-nfs--server_packages"></a>`server_packages`

Data type: `Array`

It defines the packages needed to be installed for acting as a NFS server.

Default value: `$nfs::params::server_packages`

##### <a name="-nfs--server_package_ensure"></a>`server_package_ensure`

Data type: `String`

It defines the packages state - any of `present`, `installed`, `absent`, `purged`, `held`, `latest`.

Default value: `'installed'`

##### <a name="-nfs--client_packages"></a>`client_packages`

Data type: `Array`

It defines the packages needed to be installed for acting as a NFS client

Default value: `$nfs::params::client_packages`

##### <a name="-nfs--client_package_ensure"></a>`client_package_ensure`

Data type: `String`

It defines the packages state - any of `present`, `installed`, `absent`, `purged`, `held`, `latest`.

Default value: `'installed'`

##### <a name="-nfs--manage_server_service"></a>`manage_server_service`

Data type: `Boolean`

Defines if module should manage server_service.

Default value: `true`

##### <a name="-nfs--manage_server_servicehelper"></a>`manage_server_servicehelper`

Data type: `Boolean`

Defines if module should manage server_servicehelper.

Default value: `true`

##### <a name="-nfs--manage_client_service"></a>`manage_client_service`

Data type: `Boolean`

Defines if module should manage client_service.

Default value: `true`

##### <a name="-nfs--server_service_name"></a>`server_service_name`

Data type: `String`

It defines the servicename of the NFS server service.

Default value: `$nfs::params::server_service_name`

##### <a name="-nfs--server_service_ensure"></a>`server_service_ensure`

Data type: `Enum['present', 'absent', 'running', 'stopped', 'disabled']`

It defines the service parameter ensure for NFS server services.

Default value: `'running'`

##### <a name="-nfs--server_service_enable"></a>`server_service_enable`

Data type: `Boolean`

It defines the service parameter enable for NFS server service.

Default value: `true`

##### <a name="-nfs--server_service_hasrestart"></a>`server_service_hasrestart`

Data type: `Boolean`

It defines the service parameter hasrestart for NFS server service.

Default value: `$nfs::params::server_service_hasrestart`

##### <a name="-nfs--server_service_hasstatus"></a>`server_service_hasstatus`

Data type: `Boolean`

It defines the service parameter hasstatus for NFS server service.

Default value: `$nfs::params::server_service_hasstatus`

##### <a name="-nfs--server_service_restart_cmd"></a>`server_service_restart_cmd`

Data type: `Optional[String]`

It defines the service parameter restart for NFS server service.

Default value: `$nfs::params::server_service_restart_cmd`

##### <a name="-nfs--server_nfsv4_servicehelper"></a>`server_nfsv4_servicehelper`

Data type: `Optional[Array]`

It defines the service helper like idmapd for servers configured with NFS version 4.

Default value: `$nfs::params::server_nfsv4_servicehelper`

##### <a name="-nfs--client_services"></a>`client_services`

Data type: `Hash`

It defines the servicenames need to be started when acting as a NFS client.

Default value: `$nfs::params::client_services`

##### <a name="-nfs--client_nfsv4_services"></a>`client_nfsv4_services`

Data type: `Hash`

It defines the servicenames need to be started when acting as a NFS client version 4.

Default value: `$nfs::params::client_nfsv4_services`

##### <a name="-nfs--client_services_enable"></a>`client_services_enable`

Data type: `Boolean`

It defines the service parameter enable for NFS client services.

Default value: `$nfs::params::client_services_enable`

##### <a name="-nfs--client_idmapd_setting"></a>`client_idmapd_setting`

Data type: `Array[String]`

It defines the Augeas parameter added in @param defaults_file when acting as a NFS version 4 client.

Default value: `$nfs::params::client_idmapd_setting`

##### <a name="-nfs--client_nfs_fstype"></a>`client_nfs_fstype`

Data type: `String`

It defines the name of the NFS filesystem, when adding entries to `/etc/fstab` on a client node.

Default value: `$nfs::params::client_nfs_fstype`

##### <a name="-nfs--client_nfs_options"></a>`client_nfs_options`

Data type: `String`

It defines the options for the NFS filesystem, when adding entries to `/etc/fstab` on a client node.

Default value: `$nfs::params::client_nfs_options`

##### <a name="-nfs--client_nfsv4_fstype"></a>`client_nfsv4_fstype`

Data type: `String`

It defines the name of the NFS version 4 filesystem, when adding entries to `/etc/fstab` on a client node.

Default value: `$nfs::params::client_nfsv4_fstype`

##### <a name="-nfs--client_nfsv4_options"></a>`client_nfsv4_options`

Data type: `String`

It defines the options for the NFS version 4 filesystem, when adding entries to `/etc/fstab` on a client node.

Default value: `$nfs::params::client_nfsv4_options`

##### <a name="-nfs--nfs_v4_export_root"></a>`nfs_v4_export_root`

Data type: `String`

It defines the location where NFS version 4 exports should be bindmounted to on a server node.

Default value: `'/export'`

##### <a name="-nfs--nfs_v4_export_root_clients"></a>`nfs_v4_export_root_clients`

Data type: `String`

It defines the clients that are allowed to mount NFS version 4 exports and includes the option string.

Default value: `"*.${facts['networking']['domain']}(ro,fsid=root,insecure,no_subtree_check,async,root_squash)"`

##### <a name="-nfs--nfs_v4_mount_root"></a>`nfs_v4_mount_root`

Data type: `String`

It defines the location where NFS version 4 clients find the mount root on a server node.

Default value: `'/srv'`

##### <a name="-nfs--nfs_v4_idmap_domain"></a>`nfs_v4_idmap_domain`

Data type: `String`

It defines the name of the idmapd domain setting in @param idmapd_file needed to be set to the same value on a
server and client node to do correct uid and gid mapping.

Default value: `$nfs::params::nfs_v4_idmap_domain`

##### <a name="-nfs--nfsv4_bindmount_enable"></a>`nfsv4_bindmount_enable`

Data type: `Boolean`

It defines if the module should create a bindmount for the export.

Default value: `true`

##### <a name="-nfs--client_need_gssd"></a>`client_need_gssd`

Data type: `Boolean`

If `true`, sets `NEED_GSSD=yes` in `/etc/defauls/nfs-common`, usable on Debian/Ubuntu.

Default value: `false`

##### <a name="-nfs--client_gssd_service"></a>`client_gssd_service`

Data type: `Boolean`

If `true` enable rpc-gssd service.

Default value: `false`

##### <a name="-nfs--client_gssd_options"></a>`client_gssd_options`

Data type: `String`

Options for rpc-gssd service.

Default value: `$nfs::params::client_gssd_options`

##### <a name="-nfs--client_d9_gssdopt_workaround"></a>`client_d9_gssdopt_workaround`

Data type: `Boolean`

If enabled, workaround for passing gssd_options which is broken on Debian 9. Usable only on Debian 9.

Default value: `false`

##### <a name="-nfs--nfs_v4_idmap_localrealms"></a>`nfs_v4_idmap_localrealms`

Data type: `Variant[String, Array]`

`Local-Realms` option for idmapd.

Default value: `''`

##### <a name="-nfs--nfs_v4_idmap_cache"></a>`nfs_v4_idmap_cache`

Data type: `Integer`

`Cache-Expiration` option for idmapd. If `0` cache is unused.

Default value: `0`

##### <a name="-nfs--manage_nfs_v4_idmap_nobody_mapping"></a>`manage_nfs_v4_idmap_nobody_mapping`

Data type: `Boolean`

Enable setting Nobody mapping in idmapd.

Default value: `false`

##### <a name="-nfs--nfs_v4_idmap_nobody_user"></a>`nfs_v4_idmap_nobody_user`

Data type: `String`

`Nobody-User` option for idmapd.

Default value: `$nfs::params::nfs_v4_idmap_nobody_user`

##### <a name="-nfs--nfs_v4_idmap_nobody_group"></a>`nfs_v4_idmap_nobody_group`

Data type: `String`

`Nobody-Group` option for idmapd.

Default value: `$nfs::params::nfs_v4_idmap_nobody_group`

##### <a name="-nfs--client_rpcbind_config"></a>`client_rpcbind_config`

Data type: `Optional[Stdlib::Absolutepath]`

It defines the location of the file with the rpcbind config.

Default value: `$nfs::params::client_rpcbind_config`

##### <a name="-nfs--client_rpcbind_optname"></a>`client_rpcbind_optname`

Data type: `Optional[String]`

It defines the name of environment variable that holds the rpcbind config. E.g. OPTIONS for Debian.

Default value: `$nfs::params::client_rpcbind_optname`

##### <a name="-nfs--client_rpcbind_opts"></a>`client_rpcbind_opts`

Data type: `Optional[String]`

Options for rpcbind service.

Default value: `undef`

##### <a name="-nfs--nfs_v4_root_export_ensure"></a>`nfs_v4_root_export_ensure`

Data type: `String`

It defines the state of the NFS version 4 root export.

Default value: `'mounted'`

##### <a name="-nfs--nfs_v4_root_export_mount"></a>`nfs_v4_root_export_mount`

Data type: `Optional[String]`

It defines the mountpoint of the NFS version 4 root export.

Default value: `undef`

##### <a name="-nfs--nfs_v4_root_export_remounts"></a>`nfs_v4_root_export_remounts`

Data type: `Boolean`

It defines if the NFS version 4 root export should be remounted.

Default value: `false`

##### <a name="-nfs--nfs_v4_root_export_atboot"></a>`nfs_v4_root_export_atboot`

Data type: `Boolean`

It defines if the NFS version 4 root export should be mounted at boot.

Default value: `false`

##### <a name="-nfs--nfs_v4_root_export_options"></a>`nfs_v4_root_export_options`

Data type: `String`

It defines the options for the NFS version 4 root export.

Default value: `'_netdev'`

##### <a name="-nfs--nfs_v4_root_export_bindmount"></a>`nfs_v4_root_export_bindmount`

Data type: `Optional[String]`

It defines the bindmount of the NFS version 4 root export.

Default value: `undef`

##### <a name="-nfs--nfs_v4_root_export_tag"></a>`nfs_v4_root_export_tag`

Data type: `Optional[String]`

It defines the tag of the NFS version 4 root export.

Default value: `undef`

##### <a name="-nfs--client_gssd_service_name"></a>`client_gssd_service_name`

Data type: `Optional[Hash]`

It defines the servicename of the rpc-gssd service.

Default value: `$nfs::params::client_gssd_service_name`

##### <a name="-nfs--client_services_hasrestart"></a>`client_services_hasrestart`

Data type: `Boolean`

It defines the service parameter hasrestart for NFS client services.

Default value: `$nfs::params::client_services_hasrestart`

##### <a name="-nfs--client_services_hasstatus"></a>`client_services_hasstatus`

Data type: `Boolean`

It defines the service parameter hasstatus for NFS client services.

Default value: `$nfs::params::client_services_hasstatus`

##### <a name="-nfs--client_gssdopt_name"></a>`client_gssdopt_name`

Data type: `String`

It defines the name of the gssd option in `/etc/default/nfs-common`.

Default value: `$nfs::params::client_gssdopt_name`

### <a name="nfs--client"></a>`nfs::client`

This class exists to:
1. Order the loading of classes,
2. Including all needed classes for NFS as a client.

#### Parameters

The following parameters are available in the `nfs::client` class:

* [`ensure`](#-nfs--client--ensure)
* [`nfs_v4`](#-nfs--client--nfs_v4)
* [`nfs_v4_mount_root`](#-nfs--client--nfs_v4_mount_root)
* [`nfs_v4_idmap_domain`](#-nfs--client--nfs_v4_idmap_domain)

##### <a name="-nfs--client--ensure"></a>`ensure`

Data type: `String`

The ensure parameter is used to determine if the NFS client should be configured and running or not.

Default value: `$nfs::ensure`

##### <a name="-nfs--client--nfs_v4"></a>`nfs_v4`

Data type: `Boolean`

The nfs_v4 parameter is used to determine if the NFS client should use NFS version 4.

Default value: `$nfs::nfs_v4_client`

##### <a name="-nfs--client--nfs_v4_mount_root"></a>`nfs_v4_mount_root`

Data type: `String`

The nfs_v4_mount_root parameter is used to determine the root directory for NFS version 4 mounts.

Default value: `$nfs::nfs_v4_mount_root`

##### <a name="-nfs--client--nfs_v4_idmap_domain"></a>`nfs_v4_idmap_domain`

Data type: `String`

The nfs_v4_idmap_domain parameter is used to determine the domain for NFS version 4 id mapping.

Default value: `$nfs::nfs_v4_idmap_domain`

### <a name="nfs--client--config"></a>`nfs::client::config`

Configure NFS as a client.

### <a name="nfs--client--package"></a>`nfs::client::package`

Install needed packages for NFS clients.

### <a name="nfs--client--service"></a>`nfs::client::service`

Manage the needed services for NFS clients.

### <a name="nfs--params"></a>`nfs::params`

This class exists to
1. Declutter the default value assignment for class parameters,
2. Manage internally used module variables in a central place.

Therefore, many operating system dependent differences (names, paths, ...) are addressed in here.

### <a name="nfs--server"></a>`nfs::server`

This class exists to:
1. Order the loading of classes,
2. Including all needed classes for NFS as a server.

#### Parameters

The following parameters are available in the `nfs::server` class:

* [`ensure`](#-nfs--server--ensure)
* [`nfs_v4`](#-nfs--server--nfs_v4)
* [`nfs_v4_export_root`](#-nfs--server--nfs_v4_export_root)
* [`nfs_v4_export_root_clients`](#-nfs--server--nfs_v4_export_root_clients)
* [`nfs_v4_idmap_domain`](#-nfs--server--nfs_v4_idmap_domain)
* [`nfs_v4_root_export_ensure`](#-nfs--server--nfs_v4_root_export_ensure)
* [`nfs_v4_root_export_mount`](#-nfs--server--nfs_v4_root_export_mount)
* [`nfs_v4_root_export_remounts`](#-nfs--server--nfs_v4_root_export_remounts)
* [`nfs_v4_root_export_atboot`](#-nfs--server--nfs_v4_root_export_atboot)
* [`nfs_v4_root_export_options`](#-nfs--server--nfs_v4_root_export_options)
* [`nfs_v4_root_export_bindmount`](#-nfs--server--nfs_v4_root_export_bindmount)
* [`nfs_v4_root_export_tag`](#-nfs--server--nfs_v4_root_export_tag)

##### <a name="-nfs--server--ensure"></a>`ensure`

Data type: `Enum['present', 'absent', 'running', 'stopped', 'disabled']`



Default value: `$nfs::ensure`

##### <a name="-nfs--server--nfs_v4"></a>`nfs_v4`

Data type: `Boolean`



Default value: `$nfs::nfs_v4`

##### <a name="-nfs--server--nfs_v4_export_root"></a>`nfs_v4_export_root`

Data type: `String`



Default value: `$nfs::nfs_v4_export_root`

##### <a name="-nfs--server--nfs_v4_export_root_clients"></a>`nfs_v4_export_root_clients`

Data type: `String`



Default value: `$nfs::nfs_v4_export_root_clients`

##### <a name="-nfs--server--nfs_v4_idmap_domain"></a>`nfs_v4_idmap_domain`

Data type: `String`



Default value: `$nfs::nfs_v4_idmap_domain`

##### <a name="-nfs--server--nfs_v4_root_export_ensure"></a>`nfs_v4_root_export_ensure`

Data type: `String`



Default value: `$nfs::nfs_v4_root_export_ensure`

##### <a name="-nfs--server--nfs_v4_root_export_mount"></a>`nfs_v4_root_export_mount`

Data type: `Optional[String]`



Default value: `$nfs::nfs_v4_root_export_mount`

##### <a name="-nfs--server--nfs_v4_root_export_remounts"></a>`nfs_v4_root_export_remounts`

Data type: `Boolean`



Default value: `$nfs::nfs_v4_root_export_remounts`

##### <a name="-nfs--server--nfs_v4_root_export_atboot"></a>`nfs_v4_root_export_atboot`

Data type: `Boolean`



Default value: `$nfs::nfs_v4_root_export_atboot`

##### <a name="-nfs--server--nfs_v4_root_export_options"></a>`nfs_v4_root_export_options`

Data type: `String`



Default value: `$nfs::nfs_v4_root_export_options`

##### <a name="-nfs--server--nfs_v4_root_export_bindmount"></a>`nfs_v4_root_export_bindmount`

Data type: `Optional[String]`



Default value: `$nfs::nfs_v4_root_export_bindmount`

##### <a name="-nfs--server--nfs_v4_root_export_tag"></a>`nfs_v4_root_export_tag`

Data type: `Optional[String]`



Default value: `$nfs::nfs_v4_root_export_tag`

### <a name="nfs--server--config"></a>`nfs::server::config`

Configure NFS as a server.

### <a name="nfs--server--package"></a>`nfs::server::package`

Install needed packages for NFS server.

### <a name="nfs--server--service"></a>`nfs::server::service`

Manage the needed services for NFS server.

## Defined types

### <a name="nfs--client--mount"></a>`nfs::client::mount`

param nfs_v4
  When set to true, it uses NFS version 4 to mount a share.

#### Examples

##### 

```puppet
class { '::nfs':
  client_enabled => true,
  nfs_v4_client  => true
}

nfs::client::mount { '/target/directory':
  server        => '1.2.3.4',
  share         => 'share_name_on_nfs_server',
  remounts      => true,
  atboot        => true,
  options_nfsv4 => 'tcp,nolock,rsize=32768,wsize=32768,intr,noatime,actimeo=3'
}
```

#### Parameters

The following parameters are available in the `nfs::client::mount` defined type:

* [`server`](#-nfs--client--mount--server)
* [`share`](#-nfs--client--mount--share)
* [`ensure`](#-nfs--client--mount--ensure)
* [`remounts`](#-nfs--client--mount--remounts)
* [`atboot`](#-nfs--client--mount--atboot)
* [`options_nfsv4`](#-nfs--client--mount--options_nfsv4)
* [`options_nfs`](#-nfs--client--mount--options_nfs)
* [`bindmount`](#-nfs--client--mount--bindmount)
* [`nfstag`](#-nfs--client--mount--nfstag)
* [`owner`](#-nfs--client--mount--owner)
* [`group`](#-nfs--client--mount--group)
* [`mode`](#-nfs--client--mount--mode)
* [`mount_root`](#-nfs--client--mount--mount_root)
* [`mount`](#-nfs--client--mount--mount)
* [`manage_packages`](#-nfs--client--mount--manage_packages)
* [`client_packages`](#-nfs--client--mount--client_packages)
* [`nfs_v4`](#-nfs--client--mount--nfs_v4)

##### <a name="-nfs--client--mount--server"></a>`server`

Data type: `String[1]`

Sets the ip address of the server with the NFS export.

##### <a name="-nfs--client--mount--share"></a>`share`

Data type: `Optional[String[1]]`

Sets the name of the NFS share on the server.

Default value: `undef`

##### <a name="-nfs--client--mount--ensure"></a>`ensure`

Data type: `String[1]`

Sets the ensure parameter of the mount.

Default value: `'mounted'`

##### <a name="-nfs--client--mount--remounts"></a>`remounts`

Data type: `Boolean`

Sets the remounts parameter of the mount.

Default value: `false`

##### <a name="-nfs--client--mount--atboot"></a>`atboot`

Data type: `Boolean`

Sets the atboot parameter of the mount.

Default value: `false`

##### <a name="-nfs--client--mount--options_nfsv4"></a>`options_nfsv4`

Data type: `String[1]`

Sets the mount options for a NFS version 4 mount.

Default value: `$nfs::client_nfsv4_options`

##### <a name="-nfs--client--mount--options_nfs"></a>`options_nfs`

Data type: `String[1]`

Sets the mount options for a NFS mount.

Default value: `$nfs::client_nfs_options`

##### <a name="-nfs--client--mount--bindmount"></a>`bindmount`

Data type: `Optional[String[1]]`

When not undef it will create a bindmount on the node for the NFS mount.

Default value: `undef`

##### <a name="-nfs--client--mount--nfstag"></a>`nfstag`

Data type: `Optional[String[1]]`

Sets the nfstag parameter of the mount.

Default value: `undef`

##### <a name="-nfs--client--mount--owner"></a>`owner`

Data type: `Optional[String[1]]`

Set owner of mount directory.

Default value: `undef`

##### <a name="-nfs--client--mount--group"></a>`group`

Data type: `Optional[String[1]]`

Set group of mount directory.

Default value: `undef`

##### <a name="-nfs--client--mount--mode"></a>`mode`

Data type: `Optional[String[1]]`

Set mode of mount directory.

Default value: `undef`

##### <a name="-nfs--client--mount--mount_root"></a>`mount_root`

Data type: `Optional[String[1]]`

Overwrite mount root if differs from server configuration.

Default value: `undef`

##### <a name="-nfs--client--mount--mount"></a>`mount`

Data type: `String[1]`



Default value: `$title`

##### <a name="-nfs--client--mount--manage_packages"></a>`manage_packages`

Data type: `Boolean`



Default value: `$nfs::manage_packages`

##### <a name="-nfs--client--mount--client_packages"></a>`client_packages`

Data type: `Optional[Variant[String[1], Array[String[1]]]]`



Default value: `$nfs::effective_client_packages`

##### <a name="-nfs--client--mount--nfs_v4"></a>`nfs_v4`

Data type: `Boolean`



Default value: `$nfs::client::nfs_v4`

### <a name="nfs--functions--bindmount"></a>`nfs::functions::bindmount`

Manage bindmounts.

#### Parameters

The following parameters are available in the `nfs::functions::bindmount` defined type:

* [`mount_name`](#-nfs--functions--bindmount--mount_name)
* [`ensure`](#-nfs--functions--bindmount--ensure)

##### <a name="-nfs--functions--bindmount--mount_name"></a>`mount_name`

Data type: `Optional[String[1]]`

Sets the target directory for the bindmount.

Default value: `undef`

##### <a name="-nfs--functions--bindmount--ensure"></a>`ensure`

Data type: `String[1]`

Sets if enabled or not.

Default value: `'present'`

### <a name="nfs--functions--create_export"></a>`nfs::functions::create_export`

Manage export creation.

#### Parameters

The following parameters are available in the `nfs::functions::create_export` defined type:

* [`clients`](#-nfs--functions--create_export--clients)
* [`ensure`](#-nfs--functions--create_export--ensure)
* [`owner`](#-nfs--functions--create_export--owner)
* [`group`](#-nfs--functions--create_export--group)
* [`mode`](#-nfs--functions--create_export--mode)
* [`manage_directory`](#-nfs--functions--create_export--manage_directory)

##### <a name="-nfs--functions--create_export--clients"></a>`clients`

Data type: `Variant[String[1], Array[String[1]]]`

Sets the clients allowed to mount the export with options.

##### <a name="-nfs--functions--create_export--ensure"></a>`ensure`

Data type: `String[1]`

Sets if enabled or not.

Default value: `'present'`

##### <a name="-nfs--functions--create_export--owner"></a>`owner`

Data type: `Optional[String[1]]`

Sets the owner of the exported directory.

Default value: `undef`

##### <a name="-nfs--functions--create_export--group"></a>`group`

Data type: `Optional[String[1]]`

Sets the group of the exported directory.

Default value: `undef`

##### <a name="-nfs--functions--create_export--mode"></a>`mode`

Data type: `Optional[String[1]]`

Sets the permissions of the exported directory.

Default value: `undef`

##### <a name="-nfs--functions--create_export--manage_directory"></a>`manage_directory`

Data type: `Boolean`

Whether or not to manage the directory to be exported.

Default value: `true`

### <a name="nfs--functions--mkdir"></a>`nfs::functions::mkdir`

Manage directory creation.

#### Parameters

The following parameters are available in the `nfs::functions::mkdir` defined type:

* [`ensure`](#-nfs--functions--mkdir--ensure)

##### <a name="-nfs--functions--mkdir--ensure"></a>`ensure`

Data type: `String[1]`



Default value: `'present'`

### <a name="nfs--functions--nfsv4_bindmount"></a>`nfs::functions::nfsv4_bindmount`

Manage bindmounts for NFS v4.

#### Parameters

The following parameters are available in the `nfs::functions::nfsv4_bindmount` defined type:

* [`v4_export_name`](#-nfs--functions--nfsv4_bindmount--v4_export_name)
* [`bind`](#-nfs--functions--nfsv4_bindmount--bind)
* [`ensure`](#-nfs--functions--nfsv4_bindmount--ensure)

##### <a name="-nfs--functions--nfsv4_bindmount--v4_export_name"></a>`v4_export_name`

Data type: `String[1]`

Sets the target directory for the bindmount.

##### <a name="-nfs--functions--nfsv4_bindmount--bind"></a>`bind`

Data type: `String[1]`

Sets the bindmount options.

##### <a name="-nfs--functions--nfsv4_bindmount--ensure"></a>`ensure`

Data type: `String[1]`

Sets if mounted or not.

Default value: `'mounted'`

### <a name="nfs--server--export"></a>`nfs::server::export`

Manage all exported resources on a NFS server.

#### Examples

##### 

```puppet
class { '::nfs':
  server_enabled             => true,
  nfs_v4                     => true,
  nfs_v4_export_root         => '/share',
  nfs_v4_export_root_clients => '1.2.3.4/24(rw,fsid=root,insecure,no_subtree_check,async,no_root_squash)',
}

nfs::server::export { '/srv/nfs_exported/directory':
  clients => '1.2.3.4/24(rw,insecure,no_subtree_check,async,no_root_squash) 5.6.7.8/24(ro)',
  share => 'share_name_on_nfs_server',
}
```

#### Parameters

The following parameters are available in the `nfs::server::export` defined type:

* [`clients`](#-nfs--server--export--clients)
* [`bind`](#-nfs--server--export--bind)
* [`ensure`](#-nfs--server--export--ensure)
* [`remounts`](#-nfs--server--export--remounts)
* [`atboot`](#-nfs--server--export--atboot)
* [`options_nfsv4`](#-nfs--server--export--options_nfsv4)
* [`options_nfs`](#-nfs--server--export--options_nfs)
* [`bindmount`](#-nfs--server--export--bindmount)
* [`nfstag`](#-nfs--server--export--nfstag)
* [`mount`](#-nfs--server--export--mount)
* [`owner`](#-nfs--server--export--owner)
* [`group`](#-nfs--server--export--group)
* [`mode`](#-nfs--server--export--mode)
* [`server`](#-nfs--server--export--server)
* [`v3_export_name`](#-nfs--server--export--v3_export_name)
* [`v4_export_name`](#-nfs--server--export--v4_export_name)
* [`nfsv4_bindmount_enable`](#-nfs--server--export--nfsv4_bindmount_enable)
* [`manage_directory`](#-nfs--server--export--manage_directory)

##### <a name="-nfs--server--export--clients"></a>`clients`

Data type: `Variant[String[1],Array[String[1]]]`

Sets the allowed clients and options for the export in the exports file.

Default value: `'localhost(ro)'`

##### <a name="-nfs--server--export--bind"></a>`bind`

Data type: `String[1]`

Sets the bind options setted in `/etc/fstab` for the bindmounts created.

Default value: `'rbind'`

##### <a name="-nfs--server--export--ensure"></a>`ensure`

Data type: `String[1]`

If enabled the mount will be created.

Default value: `'mounted'`

##### <a name="-nfs--server--export--remounts"></a>`remounts`

Data type: `Boolean`

Sets the remounts parameter of the mount.

Default value: `false`

##### <a name="-nfs--server--export--atboot"></a>`atboot`

Data type: `Boolean`

Sets the atboot parameter of the mount.

Default value: `false`

##### <a name="-nfs--server--export--options_nfsv4"></a>`options_nfsv4`

Data type: `String[1]`

Sets the mount options for a NFS version 4 exported resource mount.

Default value: `$nfs::client_nfsv4_options`

##### <a name="-nfs--server--export--options_nfs"></a>`options_nfs`

Data type: `String[1]`

Sets the mount options for a NFS exported resource mount.

Default value: `$nfs::client_nfs_options`

##### <a name="-nfs--server--export--bindmount"></a>`bindmount`

Data type: `Optional[String[1]]`

When not undef it will create a bindmount on the node for the NFS mount.

Default value: `undef`

##### <a name="-nfs--server--export--nfstag"></a>`nfstag`

Data type: `Optional[String[1]]`

Sets the nfstag parameter of the mount.

Default value: `undef`

##### <a name="-nfs--server--export--mount"></a>`mount`

Data type: `Optional[String[1]]`

Sets the mountpoint the client will mount the exported resource mount on. If undef it defaults to the same path as
on the server.

Default value: `undef`

##### <a name="-nfs--server--export--owner"></a>`owner`

Data type: `Optional[String[1]]`

Sets the owner of the exported directory.

Default value: `undef`

##### <a name="-nfs--server--export--group"></a>`group`

Data type: `Optional[String[1]]`

Sets the group of the exported directory.

Default value: `undef`

##### <a name="-nfs--server--export--mode"></a>`mode`

Data type: `Optional[String[1]]`

Sets the permissions of the exported directory.

Default value: `undef`

##### <a name="-nfs--server--export--server"></a>`server`

Data type: `String[1]`

Sets the hostname clients will use to mount the exported resource. If undef it defaults to the trusted certname.

Default value: `$facts['clientcert']`

##### <a name="-nfs--server--export--v3_export_name"></a>`v3_export_name`

Data type: `String[1]`



Default value: `$name`

##### <a name="-nfs--server--export--v4_export_name"></a>`v4_export_name`

Data type: `String[1]`



Default value: `regsubst($name, '.*/(.*)', '\1' )`

##### <a name="-nfs--server--export--nfsv4_bindmount_enable"></a>`nfsv4_bindmount_enable`

Data type: `Boolean`



Default value: `$nfs::nfsv4_bindmount_enable`

##### <a name="-nfs--server--export--manage_directory"></a>`manage_directory`

Data type: `Boolean`

Whether or not to manage the directory to be exported.

Default value: `true`

